{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/emanuel/Library/Mobile%20Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/PostForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PostForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call PostForm() from the server but PostForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Library/Mobile Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/PostForm.tsx <module evaluation>\",\n    \"PostForm\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,mcAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,wJACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/emanuel/Library/Mobile%20Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/PostForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PostForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call PostForm() from the server but PostForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Library/Mobile Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/PostForm.tsx\",\n    \"PostForm\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,mcAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,oIACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/emanuel/Library/Mobile%20Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { createSupabaseServerClient, churchOrgId } from \"../../lib/churchEnv\";\nimport { PostForm } from \"./PostForm\";\n\ntype BulletinPostRow = {\n  id: number;\n  organization_id: string;\n  title: string;\n  content: string;\n  author_name: string;\n  created_at: string;\n};\n\ntype BulletinCommentRow = {\n  id: number;\n  bulletin_post_id: number;\n  organization_id: string;\n  author_name: string;\n  content: string;\n  created_at: string;\n};\n\nexport default async function BulletinPage() {\n  const supabase = createSupabaseServerClient();\n\n  if (!churchOrgId) {\n    return (\n      <div className=\"container px-4 py-10 space-y-4\">\n        <p className=\"text-3xl font-bold text-white\">Bulletin</p>\n        <p className=\"text-neutral-400\">Missing NEXT_PUBLIC_CHURCH_ORG_ID.</p>\n        <Link className=\"inline-flex items-center justify-center rounded-xl border border-neutral-800 bg-neutral-900/60 px-4 py-2 text-sm font-medium text-neutral-200 hover:text-white\" href=\"/\">\n            Back home\n          </Link>\n      </div>\n    );\n  }\n\n  if (!supabase) {\n    return (\n      <div className=\"container px-4 py-10 space-y-4\">\n        <p className=\"text-3xl font-bold text-white\">Bulletin</p>\n        <p className=\"text-neutral-400\">Missing Supabase env vars.</p>\n        <Link className=\"inline-flex items-center justify-center rounded-xl border border-neutral-800 bg-neutral-900/60 px-4 py-2 text-sm font-medium text-neutral-200 hover:text-white\" href=\"/\">\n            Back home\n          </Link>\n      </div>\n    );\n  }\n\n  const { data: postsData, error: postsError } = await supabase\n    .from(\"bulletin_posts\")\n    .select(\"id, organization_id, title, content, author_name, created_at\")\n    .eq(\"organization_id\", churchOrgId)\n    .order(\"created_at\", { ascending: false })\n    .returns<BulletinPostRow[]>();\n\n  const postIds = (postsData ?? []).map((p) => p.id);\n\n  const { data: commentsData, error: commentsError } = postIds.length\n    ? await supabase\n        .from(\"bulletin_comments\")\n        .select(\"id, bulletin_post_id, organization_id, author_name, content, created_at\")\n        .eq(\"organization_id\", churchOrgId)\n        .in(\"bulletin_post_id\", postIds)\n        .order(\"created_at\", { ascending: true })\n        .returns<BulletinCommentRow[]>()\n    : { data: [] as BulletinCommentRow[], error: null };\n\n  const commentsByPostId = new Map<number, BulletinCommentRow[]>();\n  (commentsData ?? []).forEach((c) => {\n    const existing = commentsByPostId.get(c.bulletin_post_id) ?? [];\n    existing.push(c);\n    commentsByPostId.set(c.bulletin_post_id, existing);\n  });\n\n  return (\n    <div className=\"container px-4 py-10 space-y-10\">\n        <div className=\"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between\">\n          <div className=\"space-y-2\">\n            <p className=\"text-xs font-semibold uppercase tracking-[0.2em] text-neutral-500\">Community</p>\n            <h1 className=\"text-3xl sm:text-4xl font-bold text-white\">Bulletin Board</h1>\n            <p className=\"text-neutral-400\">\n              Share updates and encouragement. Posts are visible to everyone.\n            </p>\n          </div>\n          <Link className=\"inline-flex items-center justify-center rounded-xl border border-neutral-800 bg-neutral-900/60 px-4 py-2 text-sm font-medium text-neutral-200 hover:text-white\" href=\"/\">\n            Back home\n          </Link>\n        </div>\n\n        <PostForm />\n\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-semibold text-white\">Latest posts</h2>\n\n          {(postsError || commentsError) && (\n            <div className=\"rounded-xl border border-neutral-800 bg-neutral-900/60 p-5\">\n              <p className=\"text-sm text-red-400\">\n                {postsError?.message ?? commentsError?.message}\n              </p>\n            </div>\n          )}\n\n          {!postsError && (postsData?.length ?? 0) === 0 && (\n            <div className=\"rounded-xl border border-neutral-800 bg-neutral-900/60 p-5\">\n              <p className=\"text-neutral-400\">No community posts yet.</p>\n            </div>\n          )}\n\n          {(postsData ?? []).map((post) => (\n            <article key={post.id} className=\"rounded-xl border border-neutral-800 bg-neutral-900/60 p-6 space-y-4\">\n              <div className=\"space-y-1\">\n                <p className=\"text-xl font-semibold text-white\">{post.title}</p>\n                <p className=\"text-sm text-neutral-400\">\n                  {post.author_name} • {new Date(post.created_at).toLocaleString()}\n                </p>\n              </div>\n              <p className=\"text-neutral-200 whitespace-pre-wrap\">{post.content}</p>\n\n              <div className=\"space-y-3\">\n                <p className=\"text-sm font-semibold text-neutral-200\">Comments</p>\n                {(commentsByPostId.get(post.id) ?? []).length === 0 ? (\n                  <p className=\"text-sm text-neutral-400\">No comments yet.</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {(commentsByPostId.get(post.id) ?? []).map((c) => (\n                      <div key={c.id} className=\"rounded-xl border border-neutral-800 bg-neutral-950/60 p-4\">\n                        <p className=\"text-sm text-neutral-400\">\n                          {c.author_name} • {new Date(c.created_at).toLocaleString()}\n                        </p>\n                        <p className=\"text-neutral-200 whitespace-pre-wrap\">{c.content}</p>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </article>\n          ))}\n        </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAoBe,eAAe;IAC5B,MAAM,WAAW,IAAA,mRAA0B;IAE3C,IAAI,CAAC,oQAAW,EAAE;QAChB,qBACE,yaAAC;YAAI,WAAU;;8BACb,yaAAC;oBAAE,WAAU;8BAAgC;;;;;;8BAC7C,yaAAC;oBAAE,WAAU;8BAAmB;;;;;;8BAChC,yaAAC,qXAAI;oBAAC,WAAU;oBAAiK,MAAK;8BAAI;;;;;;;;;;;;IAKhM;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,yaAAC;YAAI,WAAU;;8BACb,yaAAC;oBAAE,WAAU;8BAAgC;;;;;;8BAC7C,yaAAC;oBAAE,WAAU;8BAAmB;;;;;;8BAChC,yaAAC,qXAAI;oBAAC,WAAU;oBAAiK,MAAK;8BAAI;;;;;;;;;;;;IAKhM;IAEA,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SAClD,IAAI,CAAC,kBACL,MAAM,CAAC,gEACP,EAAE,CAAC,mBAAmB,oQAAW,EACjC,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM,GACvC,OAAO;IAEV,MAAM,UAAU,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;IAEjD,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,aAAa,EAAE,GAAG,QAAQ,MAAM,GAC/D,MAAM,SACH,IAAI,CAAC,qBACL,MAAM,CAAC,2EACP,EAAE,CAAC,mBAAmB,oQAAW,EACjC,EAAE,CAAC,oBAAoB,SACvB,KAAK,CAAC,cAAc;QAAE,WAAW;IAAK,GACtC,OAAO,KACV;QAAE,MAAM,EAAE;QAA0B,OAAO;IAAK;IAEpD,MAAM,mBAAmB,IAAI;IAC7B,CAAC,gBAAgB,EAAE,EAAE,OAAO,CAAC,CAAC;QAC5B,MAAM,WAAW,iBAAiB,GAAG,CAAC,EAAE,gBAAgB,KAAK,EAAE;QAC/D,SAAS,IAAI,CAAC;QACd,iBAAiB,GAAG,CAAC,EAAE,gBAAgB,EAAE;IAC3C;IAEA,qBACE,yaAAC;QAAI,WAAU;;0BACX,yaAAC;gBAAI,WAAU;;kCACb,yaAAC;wBAAI,WAAU;;0CACb,yaAAC;gCAAE,WAAU;0CAAoE;;;;;;0CACjF,yaAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAC1D,yaAAC;gCAAE,WAAU;0CAAmB;;;;;;;;;;;;kCAIlC,yaAAC,qXAAI;wBAAC,WAAU;wBAAiK,MAAK;kCAAI;;;;;;;;;;;;0BAK5L,yaAAC,6QAAQ;;;;;0BAET,yaAAC;gBAAI,WAAU;;kCACb,yaAAC;wBAAG,WAAU;kCAAmC;;;;;;oBAEhD,CAAC,cAAc,aAAa,mBAC3B,yaAAC;wBAAI,WAAU;kCACb,cAAA,yaAAC;4BAAE,WAAU;sCACV,YAAY,WAAW,eAAe;;;;;;;;;;;oBAK5C,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,MAAM,mBAC3C,yaAAC;wBAAI,WAAU;kCACb,cAAA,yaAAC;4BAAE,WAAU;sCAAmB;;;;;;;;;;;oBAInC,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,qBACtB,yaAAC;4BAAsB,WAAU;;8CAC/B,yaAAC;oCAAI,WAAU;;sDACb,yaAAC;4CAAE,WAAU;sDAAoC,KAAK,KAAK;;;;;;sDAC3D,yaAAC;4CAAE,WAAU;;gDACV,KAAK,WAAW;gDAAC;gDAAI,IAAI,KAAK,KAAK,UAAU,EAAE,cAAc;;;;;;;;;;;;;8CAGlE,yaAAC;oCAAE,WAAU;8CAAwC,KAAK,OAAO;;;;;;8CAEjE,yaAAC;oCAAI,WAAU;;sDACb,yaAAC;4CAAE,WAAU;sDAAyC;;;;;;wCACrD,CAAC,iBAAiB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,MAAM,KAAK,kBAChD,yaAAC;4CAAE,WAAU;sDAA2B;;;;;iEAExC,yaAAC;4CAAI,WAAU;sDACZ,CAAC,iBAAiB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG,CAAC,CAAC,kBAC1C,yaAAC;oDAAe,WAAU;;sEACxB,yaAAC;4DAAE,WAAU;;gEACV,EAAE,WAAW;gEAAC;gEAAI,IAAI,KAAK,EAAE,UAAU,EAAE,cAAc;;;;;;;sEAE1D,yaAAC;4DAAE,WAAU;sEAAwC,EAAE,OAAO;;;;;;;mDAJtD,EAAE,EAAE;;;;;;;;;;;;;;;;;2BAhBV,KAAK,EAAE;;;;;;;;;;;;;;;;;AA+BjC"}}]
}