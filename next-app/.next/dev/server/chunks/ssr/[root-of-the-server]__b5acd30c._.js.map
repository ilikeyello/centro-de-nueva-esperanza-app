{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/emanuel/Library/Mobile%20Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { createSupabaseServerClient, churchOrgId } from \"../../lib/churchEnv\";\n\nexport async function createBulletinPost(formData: FormData) {\n  const title = String(formData.get(\"title\") ?? \"\").trim();\n  const content = String(formData.get(\"content\") ?? \"\").trim();\n  const authorName = String(formData.get(\"authorName\") ?? \"\").trim();\n\n  if (!title || !content) {\n    return { ok: false as const, error: \"Title and content are required.\" };\n  }\n\n  if (!churchOrgId) {\n    return { ok: false as const, error: \"Church org ID is missing.\" };\n  }\n\n  const supabase = createSupabaseServerClient();\n  if (!supabase) {\n    return { ok: false as const, error: \"Supabase env vars are missing.\" };\n  }\n\n  const { error } = await supabase.from(\"bulletin_posts\").insert({\n    organization_id: churchOrgId,\n    title,\n    content,\n    author_name: authorName || \"Anonymous\",\n    author_id: null,\n  });\n\n  if (error) {\n    return { ok: false as const, error: error.message };\n  }\n\n  revalidatePath(\"/bulletin\");\n  return { ok: true as const };\n}\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,0aAAA,EAAA,8CAAA,+ZAAA,EAAA,KAAA,GAAA,qaAAA,EAAA,sDAAA"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/emanuel/Library/Mobile%20Documents/com~apple~CloudDocs/Church-Sites/centro-de-nueva-esperanza/next-app/app/bulletin/PostForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useState } from \"react\";\nimport { createBulletinPost } from \"./actions\";\n\nexport function PostForm() {\n  const formRef = useRef<HTMLFormElement | null>(null);\n  const [pending, setPending] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  return (\n    <form\n      ref={formRef}\n      className=\"rounded-xl border border-neutral-800 bg-neutral-900/60 p-6 space-y-4\"\n      action={async (formData) => {\n        setPending(true);\n        setError(null);\n        try {\n          const result = await createBulletinPost(formData);\n          if (!result.ok) {\n            setError(result.error);\n            return;\n          }\n          formRef.current?.reset();\n        } finally {\n          setPending(false);\n        }\n      }}\n    >\n      <div>\n        <label className=\"text-sm font-semibold text-neutral-200\" htmlFor=\"title\">\n          Title\n        </label>\n        <input\n          id=\"title\"\n          name=\"title\"\n          required\n          className=\"mt-2 w-full rounded-xl border border-neutral-700 bg-neutral-800 px-4 py-3 text-base text-white\"\n        />\n      </div>\n      <div>\n        <label className=\"text-sm font-semibold text-neutral-200\" htmlFor=\"content\">\n          Content\n        </label>\n        <textarea\n          id=\"content\"\n          name=\"content\"\n          required\n          rows={4}\n          className=\"mt-2 w-full rounded-xl border border-neutral-700 bg-neutral-800 px-4 py-3 text-base text-white\"\n        />\n      </div>\n      <div>\n        <label className=\"text-sm font-semibold text-neutral-200\" htmlFor=\"authorName\">\n          Name (optional)\n        </label>\n        <input\n          id=\"authorName\"\n          name=\"authorName\"\n          className=\"mt-2 w-full rounded-xl border border-neutral-700 bg-neutral-800 px-4 py-3 text-base text-white\"\n        />\n      </div>\n\n      {error && <p className=\"text-sm text-red-400\">{error}</p>}\n\n      <button\n        type=\"submit\"\n        className=\"w-full rounded-xl bg-[color:var(--color-red-600)] px-4 py-3 text-base font-semibold text-white transition-colors hover:bg-[color:var(--color-red-700)] disabled:opacity-60\"\n        disabled={pending}\n      >\n        {pending ? \"Posting...\" : \"Post\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS;IACd,MAAM,UAAU,IAAA,0YAAM,EAAyB;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4YAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4YAAQ,EAAgB;IAElD,qBACE,yaAAC;QACC,KAAK;QACL,WAAU;QACV,QAAQ,OAAO;YACb,WAAW;YACX,SAAS;YACT,IAAI;gBACF,MAAM,SAAS,MAAM,IAAA,kTAAkB,EAAC;gBACxC,IAAI,CAAC,OAAO,EAAE,EAAE;oBACd,SAAS,OAAO,KAAK;oBACrB;gBACF;gBACA,QAAQ,OAAO,EAAE;YACnB,SAAU;gBACR,WAAW;YACb;QACF;;0BAEA,yaAAC;;kCACC,yaAAC;wBAAM,WAAU;wBAAyC,SAAQ;kCAAQ;;;;;;kCAG1E,yaAAC;wBACC,IAAG;wBACH,MAAK;wBACL,QAAQ;wBACR,WAAU;;;;;;;;;;;;0BAGd,yaAAC;;kCACC,yaAAC;wBAAM,WAAU;wBAAyC,SAAQ;kCAAU;;;;;;kCAG5E,yaAAC;wBACC,IAAG;wBACH,MAAK;wBACL,QAAQ;wBACR,MAAM;wBACN,WAAU;;;;;;;;;;;;0BAGd,yaAAC;;kCACC,yaAAC;wBAAM,WAAU;wBAAyC,SAAQ;kCAAa;;;;;;kCAG/E,yaAAC;wBACC,IAAG;wBACH,MAAK;wBACL,WAAU;;;;;;;;;;;;YAIb,uBAAS,yaAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAE/C,yaAAC;gBACC,MAAK;gBACL,WAAU;gBACV,UAAU;0BAET,UAAU,eAAe;;;;;;;;;;;;AAIlC"}}]
}